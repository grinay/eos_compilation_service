---
language: generic
dist: trusty
sudo: required
services:
  - docker
env:
  global:
    - secure: "K9ozkqVZtD1N3RqV2qqFmVdF4Ti39Fg3HEZukbl4XqZkHDj6qY8JhB4gQqJFgjl1JnHH9GHz4weWQasJlX6Vmz49r/Dub+dKMPgoC8GScvDsOsoEeDrTIPrc4aYF7Sr/nEnHPeTI+UAsT8yQA6GgrOr5nAp9PJWIVHK3wyUpCv0VlhQH/qQJckvhvtsGViLGJ2wzB8VnPUu2owY+LitKqztzQ+jZvc8aD/Y9CiKSqNsk5pqGQdbCXqVEVzpWIa7fY2AGYXWE1LqT2gcNWNmYc/Hxiop6msFIwnL/dQcSzz3KNa+To6A6+Hyk0h+HJRZRW01yYzAfhh186huU72H1fJFUw4xkHAxpyjZtjsLj0gHgbhSJkNDL7JM5P7Rdqva0uQk9zQNCNqjpZLBpU39+fVEcx/QAhCSsDLDyAU5jkuSR9YONIfORoRAhRWtdCyCwuhDEls8hNUQAUb5vy6YTP6vXh2bhbvpdio2X4ni83DYkbbFC+TCUSul4hNccF9JShOsL17whTWgLof3hS5LOUsj4lFM4tQDG+Pha5bc07MW5PdJ6GH2Y9r5vJzcUALXtCzo9dk7HtA4hfSWG7tcFPauMMka4YrtNjb9LGMJA/fYZ8wQdY+vqG8BQPK/hLV1jiWXcv6uNj6qJqjhcUsmylIg+BCqZcjXTykXYb7hSD+4="
    - secure: "NdI4KGWOFNhjdJ4YAX6b1mvL4bMdyi3LDE+bAywOqiNzMtsT//P0JfZqdcUYDXdIhDopLYwrQxLw3Xpj9+6kaWK2WGltybAL8mofk7357DSgor0+HfM44loLnJsnTgcmBGb1+8IyDnjf8n10SJ+lIIEMHjwHZilGG7PddUcaJj8KJIqDAcVPXOpx8bt5gc5xR30GWBkKBNpUXqQOxbqw1T0QAqfWZe2lj3E31Get3bQeyvu00vhNPqOGUAPSUhP/pUY+aaUpxsj1myGCQWVvA6dtcheZCpRItKkrOJjsmJpBgOH01w6wfXujdBHYJYJYNFr2AXPumoXzUQEEF9OeZQ9NzqbgtSibgrMhKVDfDwnlD8OmPWh5T7MCXm/fTiUDhKyWqz9tB8YrM0ZrUyt7ZxqdqzOBOuwVHC/+24gvUA6YDzJba2/Dfoq7wcJ0RLTpD1apB8D9xCQR2LSa7jR7KxBprOPsRlcz2FlsW+EEpQR+gGawu39U/Z1dlPK7g1wWhcWU8Gy2NUjY5kSdpY9h+mLAI+hHCun9oVi6eVNcNPIkRQiRcihiIdst9nA5mhVEbLrGIBUfNK14xLo43886XCnzOlzaeFf+WwFlozC+izZyEgi1GrPqryfyQdmCTh8DmsT3e+gfssiPgTKrMfJdwQ8dvPiy8gW7ziLYq6pltzM="

before_install:
- docker --version
- docker-compose --version

install:
- sudo curl -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- ecs-cli configure profile --profile-name travis --access-key $AWS_ACCESS_KEY_ID --secret-key $AWS_SECRET_ACCESS_KEY
- ecs-cli configure --cluster default --default-launch-type EC2 --region eu-central-1 --config-name travis

script:
- docker build -t eos_compiler compiler &&
  docker images &&
  /bin/bash compiler/upload_to_registry.sh eos_compiler

notifications:
  email:
    on_success: change
    on_failure: always
