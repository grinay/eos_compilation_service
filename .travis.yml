---
language: generic
dist: trusty
sudo: required
services:
  - docker
env:
  global:
    - secure: "aUYds8jE8VWEhj4CCem4qYYVp7YQ+KqUu+p0g0pkm3lUKezduhRcZS6BBO0zCsHwgz0Yk4lM8tncMblYG21N8O1AWx2L7XkAJ+HmdwYZJmhibhRk5HD3hE+gkQXQSQ7vhlFcaHwIzCx8ASH6Vvo+6A+7axffycNhPUVF4UTq65lDcInlip1arBnm69FtYEGuIw+R20iXohkgFwZnglDldh1+qjdvw4s97OS/QTV0BZS9z2etMOSgsawMyUKpoW+fMCQdB0D4R4cqnJjV80rPAauCyKop0sSj8mz66ZcpCv/qwLDAT1Wcby41em+W5Z3oGJ9MCXLfbxRDfChgsCrtflcBJJvpLHnt/5Et5tJKdwfY/WVdWWj38RXA4XIcJx37hFVdf8Ovr6G3RxKOeiFGOi4uqMUjWkfdw8UZ7bbnl7xvvvsFz2VrvjqAaslB7S7PNrYklxnLqH7KwAwifgmSHfRhCaxiaNBxJQgeUGiBCNiTHlqrTuiCzuiDydaBW3yCaXwwZu1FMhQMx5io3Zw8sKkHp8qlcfzEBGkKP47QPYjYJ6j2wc4/CjfxcMWg5mRLtirRl1PwBtr9R8awKibNbAB3cvNGOcWYYC0MAVzzYokG3GI2zb9oHP8FxmucAt+sgjiKQ80B2UVkh4riCCBxrXozpEU8iOtI3QyThLsoFO0="
    - secure: "LrJPv9MHFqnUkMW83RxS0uRJYk8VPQ7WMtw26+BBxTqc/kDVobjDSXKYfynSYc8+4Y1y6eF7gMD3IwVcA7L12hdOUScWyqJ9H+m1VjMj5YDny5e+r3/7sbGsP2+v3qnnSBB2jDSyLm1m/VweuoAZ7Hg64/14jNXtaXiv/1s7W/CR02QKoh/r9C6JhYdXyDS/CFzbfYOc2O6bcw4dR3K806ls7+kUoJgzLve8uqGR0lM7MK9k09RaE24ETyhGHPDgCywyVXyjlrlDgB5cBQnatgS7ZGv3vS+B3AFax6uppUSPG+MDYKhOXGMCsrj6ouf4XqBGbiWZWbGSrBQA4UVZ4S/E705gII/TcT33J9uj+NS4vHXCSnGqNM5rXGb5xZ/ixY0CbdP1GFIaWQnM+ge4g9oIWT7OQTFIph/NYILfMT+722gSBMplVcqzv9ASboCIstOLgcFjf2FhOcitgoZWg28duQBDZaASaXNi0LMvbHWGX9MSOBZpfbQoG4Ee3Ax3bnVtPM8Tz7P27/9NfYB2GJOD5KlxkH9nVADs5aC+7/MNaGpvI9i3mhMEw3v90CxhmUv7Gffrf4FO6rMVoRq5oOErKlc5vf4R5LjN1ZtRjoq5MCuQ4yXdam08Z84pTs7Vu0vVAPFFRYMGlsxpgVy81VQXv8fQ4jJyk3Ml9v9b8TE="

before_install:
- docker --version
- docker-compose --version

install:
- sudo curl -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- ecs-cli configure profile --profile-name travis --access-key $AWS_ACCESS_KEY_ID --secret-key $AWS_SECRET_ACCESS_KEY
- ecs-cli configure --cluster default --default-launch-type EC2 --region eu-central-1 --config-name travis

script:
- docker build -t eos_compiler compiler &&
  docker images &&
  /bin/bash compiler/upload_to_registry.sh eos_compiler

notifications:
  email:
    on_success: change
    on_failure: always
