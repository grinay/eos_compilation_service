---
language: generic
dist: trusty
sudo: required
services:
  - docker
env:
  global:
    - secure: "k0CmrUdyKof0ddEQqb0Bk8ukG+gFu39BGq4GTT1e6fgTf7Cq6JsYG4x96y0ifuQT3+ytvdJxnnSGTS08HDE7HckW0/PBzZkG80Imy0/Imz6WyeYo+svua5clRGTftCgQdGpLQK0ka5KYIbN76Cv7ta0XQV6nlbu1Wp8fUWdeeYWejlPDeXM8z7LCzm7ROKTR6P2VEyNYp/SXNhcEI5wlcutOqzjUp9Dt1POibidkEJWkQEg452TGESepJcbJdQhJJmeJNeg7W05w2ipZAzgMikaP4xu6oi5R+oHhjdFFek1ksZggPYZ/v7lZC/gq/+3ixnwZJcDOkv28A9KsITs4hB1YLiQ6cWBDvVWF73PbSmUTuyKKCnmcjMJ13wNHsQ3ismUBx0iMHyPwuy+0EAJzQCZzTOZC5XrEnjSd/gVj/H5m7mrLp+p+DE1/laMX5C4zzk1HarN6VBDacAiH5NqbhIk7WPkrgohvcfIKzWcN0J+cNkI+aAC2gxGPNuDII9syITVIMbXUUshNZ8pdBWMUr0ZxRvMxJGxUUnW+jnbikcW0WvsJyywj4mCgRuP1FGC11KWegCIZX2XjfAB/IQ/hCv5KzPg4xgnVhtKLzhjTrbakcYTjmP5DIRvVNqssZ4CxynTD6aGR/70Va5wC1IYIaEZALAwmHzucwyZ+u/jaZlo="
    - secure: "fMypD/7EAtNUjbFQmSvFGzOUtntzAxV69eMsvrQ+mPbwRpmg1CWXbH2gyKVd3dHjjZGP9r35ADMvNHMzQRu9gFGy6cSwqX4dfS2F4SEQl8Rj2m7KyRzuPGyfrLTbnNKmbTgsFinI/6jaV+blJVOl9a9nFBLInibixB2BeITqaSeD+yFKHn+CIMpYGNBKA45jVBtvBc6/X95uuWQFKNTgN0suBPHhrkz1KqqTytIknCnCZoaLfKbVwyFHl6SZyu5NB3ziPve3+bi3zLYobGnUM4Iq3GexTT104mIChc5h0p5HN5qH5YOy7ZN1F/UBSDqD6Wg0FeKEC0Q/TeXYlkLP3JibwMXwB6GFSjr1xUTM7pjAwcIlD03Ty1PPg7/k93W1yHy9gMpYz/1MUbjgw8Ii6xyb6PfSW9IpM7FdYVAh8FXzbPImt2qPpAaFI4bJLWzd/klmqhH/uMXYjlQJwkvC/JZlGYyFc1dhpQxPKMLLbDHQVRUTajCNV2Lw5g9/JyMzTUPl1BSMuHO8PMImxDGm8IW+SVeO/w7tpfOFCJc54p6vstC2ejZOKU8HntvZlLUOzFcLx2ZbqrM9L6cevGdixKJ1TXiagI4vATKi/sMadvMtVX1mcqCUBA3o96gQXXQXId6kRxr4ipkt0Z+SS1Y1HmoccSItUQCpo+DSnRcijis="

before_install:
- docker --version
- docker-compose --version

install:
- sudo curl -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- ecs-cli configure profile --profile-name travis --access-key $AWS_ACCESS_KEY_ID --secret-key $AWS_SECRET_ACCESS_KEY
- ecs-cli configure --cluster default --default-launch-type EC2 --region eu-central-1 --config-name travis

script:
- docker build -t eos_compiler compiler &&
  docker images &&
  /bin/bash compiler/upload_to_registry.sh eos_compiler

notifications:
  email:
    on_success: change
    on_failure: always
